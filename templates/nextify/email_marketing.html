{% extends 'nextify/base.html' %} {% block main_content %}
<div class="container-fluid">
  <div class="row justify-content-center">
    <div class="col-12">
      <div class="header">
      
          <div class="header-body">
            <div class="row align-items-end">
              <div class="col">
                <!-- Pretitle -->
                <h6 class="header-pretitle">Chiến dịch</h6>

                <!-- Title -->
                <h1 class="header-title">Email Marketing</h1>
              </div>

              <div class="col-auto">
                <a href="/email_marketing/add" class="btn btn-primary ms-2">
                  <i class="fe fe-plus"></i> Thêm mới
                </a>
              </div>
            </div>
       
        </div>
      </div>
      <div class="tab-content">
        <div
          class="tab-pane fade show active"
          id="contactsListPane"
          role="tabpanel"
          aria-labelledby="contactsListTab"
        >
          <!-- Card -->
          <div
            class="card"
            data-list='{"valueNames": ["item-name", "item-title", "item-email", "item-phone", "item-score", "item-company"], "page": 10, "pagination": {"paginationClass": "list-pagination"}}'
            id="contactsList"
          >
            <div class="card-header">
              <div class="row align-items-center">
                <div class="col">
                  <!-- Form -->
                  <form>
                    <div
                      class="input-group input-group-flush input-group-merge input-group-reverse"
                    >
                      <input
                        class="form-control list-search"
                        type="search"
                        placeholder="Search"
                      />
                      <span class="input-group-text">
                        <i class="fe fe-search"></i>
                      </span>
                    </div>
                  </form>
                </div>

                <div class="col-auto">
                  <!-- Dropdown -->
                  <div class="dropdown">
                    <!-- Toggle -->
                    <button
                      class="btn btn-sm btn-white"
                      type="button"
                      data-bs-toggle="dropdown"
                      data-bs-auto-close="outside"
                      aria-haspopup="true"
                      aria-expanded="false"
                    >
                      <i class="fe fe-sliders me-1"></i> Filter
                      <span class="badge bg-primary ms-1 d-none">0</span>
                    </button>

                    <!-- Menu -->
                    <form
                      class="dropdown-menu dropdown-menu-end dropdown-menu-card"
                      style=""
                    >
                      <div class="card-header">
                        <!-- Title -->
                        <h4 class="card-header-title">Filters</h4>

                        <!-- Link -->
                        <button
                          class="btn btn-sm btn-link text-reset d-none"
                          type="reset"
                        >
                          <small>Clear filters</small>
                        </button>
                      </div>
                      <div class="card-body">
                        <!-- List group -->
                        <div class="list-group list-group-flush mt-n4 mb-4">
                          <div class="list-group-item">
                            <div class="row">
                              <div class="col">
                                <!-- Text -->
                                <small>Title</small>
                              </div>
                              <div class="col-auto">
                                <!-- Select -->
                                <div
                                  class="choices"
                                  data-type="select-one"
                                  tabindex="0"
                                  role="listbox"
                                  aria-haspopup="true"
                                  aria-expanded="false"
                                >
                                  <div class="form-select form-select-sm">
                                    <select
                                      class="form-select form-select-sm form-control"
                                      name="item-title"
                                      data-choices='{"searchEnabled": false}'
                                      hidden=""
                                      tabindex="-1"
                                      data-choice="active"
                                    >
                                      <option
                                        value="*"
                                        data-custom-properties="[object Object]"
                                      >
                                        Any
                                      </option>
                                    </select>
                                    <div
                                      class="choices__list choices__list--single"
                                    >
                                      <div
                                        class="choices__item choices__item--selectable"
                                        data-item=""
                                        data-id="1"
                                        data-value="*"
                                        data-custom-properties="[object Object]"
                                        aria-selected="true"
                                      >
                                        Any
                                      </div>
                                    </div>
                                  </div>
                                  <div
                                    class="choices__list dropdown-menu"
                                    aria-expanded="false"
                                  >
                                    <div class="choices__list" role="listbox">
                                      <div
                                        class="undefined is-highlighted"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="1"
                                        data-value="*"
                                        role="option"
                                        aria-selected="true"
                                      >
                                        Any
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="2"
                                        data-value="Designer"
                                        role="option"
                                      >
                                        Designer
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="3"
                                        data-value="Developer"
                                        role="option"
                                      >
                                        Developer
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="4"
                                        data-value="Owner"
                                        role="option"
                                      >
                                        Owner
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="5"
                                        data-value="Founder"
                                        role="option"
                                      >
                                        Founder
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <!-- / .row -->
                          </div>
                          <div class="list-group-item">
                            <div class="row">
                              <div class="col">
                                <!-- Text -->
                                <small>Lead scrore</small>
                              </div>
                              <div class="col-auto">
                                <!-- Select -->
                                <div
                                  class="choices"
                                  data-type="select-one"
                                  tabindex="0"
                                  role="listbox"
                                  aria-haspopup="true"
                                  aria-expanded="false"
                                >
                                  <div class="form-select form-select-sm">
                                    <select
                                      class="form-select form-select-sm form-control"
                                      name="item-score"
                                      data-choices='{"searchEnabled": false}'
                                      hidden=""
                                      tabindex="-1"
                                      data-choice="active"
                                    >
                                      <option
                                        value="*"
                                        data-custom-properties="[object Object]"
                                      >
                                        Any
                                      </option>
                                    </select>
                                    <div
                                      class="choices__list choices__list--single"
                                    >
                                      <div
                                        class="choices__item choices__item--selectable"
                                        data-item=""
                                        data-id="1"
                                        data-value="*"
                                        data-custom-properties="[object Object]"
                                        aria-selected="true"
                                      >
                                        Any
                                      </div>
                                    </div>
                                  </div>
                                  <div
                                    class="choices__list dropdown-menu"
                                    aria-expanded="false"
                                  >
                                    <div class="choices__list" role="listbox">
                                      <div
                                        class="undefined is-highlighted"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="1"
                                        data-value="*"
                                        role="option"
                                        aria-selected="true"
                                      >
                                        Any
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="2"
                                        data-value="1/10"
                                        role="option"
                                      >
                                        1+
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="3"
                                        data-value="2/10"
                                        role="option"
                                      >
                                        2+
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="4"
                                        data-value="3/10"
                                        role="option"
                                      >
                                        3+
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="5"
                                        data-value="4/10"
                                        role="option"
                                      >
                                        4+
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="6"
                                        data-value="5/10"
                                        role="option"
                                      >
                                        5+
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="7"
                                        data-value="6/10"
                                        role="option"
                                      >
                                        6+
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="8"
                                        data-value="7/10"
                                        role="option"
                                      >
                                        7+
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="9"
                                        data-value="8/10"
                                        role="option"
                                      >
                                        8+
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="10"
                                        data-value="9/10"
                                        role="option"
                                      >
                                        9+
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="11"
                                        data-value="10/10"
                                        role="option"
                                      >
                                        10
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <!-- / .row -->
                          </div>
                        </div>

                        <!-- Button -->
                        <button class="btn w-100 btn-primary" type="submit">
                          Apply filter
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
              <!-- / .row -->
            </div>
            <div class="table-responsive">
              <table
                class="table table-sm table-hover table-nowrap card-table"
              >
              <thead>
                <tr>
                  <th>
                    <a class="list-sort text-muted" href="#">Chiến dịch</a>
                  </th>
                  <th>
                    <a class="list-sort text-muted" href="#">Tổng số</a>
                  </th>
                  <th>
                    <a class="list-sort text-muted" href="#">Trạng thái</a>
                  </th>
                  <th>
                    <a class="list-sort text-muted" href="#">Đã gửi </a>
                  </th>
                  <th>
                    <a class="list-sort text-muted" href="#">Chưa gửi</a>
                  </th>
                  <th>
                    <a class="list-sort text-muted" href="#">Thất bại</a>
                  </th>
                
                  <th>
                    <a class="list-sort text-muted" href="#">Tạo lúc</a>
                  </th>
                  <th>
                    <a class="list-sort text-muted" href="#"></a>
                  </th>
                </tr>
              </thead>
              <tbody class="list fs-base">
                {% for camp in list_camp %}

                <tr>
                  <td>
                    <a
                      class="item-name text-reset"
                      href="{% if not camp.status or camp.status == 0 %}/email_marketing/{{ shop_id_select }}/{{ camp._id }}{% else %}/email_marketing/{{ shop_id_select }}/{{ camp._id }}/preview{% endif %}"
                    >
                      {{ camp.code }}
                    </a>
                  </td>
                  <td>
                    <span class="item-stage">{{ camp.predict_message }}</span>
                  </td>

                  <td>
                    {% if not camp.status or camp.status == 0 %}
                    <span class="badge badge-soft-primary ml-1 mt-n1"
                      >Chưa gửi</span
                    >

                    {% elif camp.status == 1 %}
                    <span class="badge badge-soft-dark ml-1 mt-n1"
                      >Đang gửi</span
                    >

                    {% else %}
                    <span class="badge badge-soft-danger ml-1 mt-n1"
                      >Hoàn thành</span
                    >

                    {% endif %}
                  </td>
                  <td>{{ camp.mail_send }}</td>
                  <td>{{ camp.mail_not_send }}</td>
                  <td>{{ camp.fail }}</td>
                  <td>
                    <time class="item-contacted"
                      >{{ camp.when|human_time }}</time
                    >
                  </td>
                  <td>

                    <a href="/email_marketing/{{ shop_id_select }}/{{ camp._id }}/logs" class="btn btn-sm btn-white d-none d-md-inline-block">
                      Báo cáo
                    </a>
           
                  </td>

                
                </tr>
                {% endfor %}
              </tbody>
            </table>
            </div>
            <div class="card-footer d-flex justify-content-between">
              <!-- Pagination (prev) -->
              <ul
                class="list-pagination-prev pagination pagination-tabs card-pagination"
              >
                <!-- <li class="page-item">
                  <a class="page-link ps-0 pe-4 border-end" href="#">
                    <i class="fe fe-arrow-left me-1"></i> Prev
                  </a>
                </li> -->
              </ul>

              <!-- Pagination -->
              <!-- <ul
                class="list-pagination pagination pagination-tabs card-pagination"
              > -->
              <!-- <ul class="pagination justify-content-center"> -->
              {% if pagination %}
              {{ pagination.links }}
              {% endif %}
              <!-- </ul> -->

              <!-- Pagination (next) -->
              <ul
                class="list-pagination-next pagination pagination-tabs card-pagination"
              >
                <!-- <li class="page-item">
                  <a class="page-link ps-4 pe-0 border-start" href="#">
                    Next <i class="fe fe-arrow-right ms-1"></i>
                  </a>
                </li> -->
              </ul>

         
            </div>
          </div>
         
        </div>

  
      </div>
    </div>
  </div>

  {% endblock %}
</div>
