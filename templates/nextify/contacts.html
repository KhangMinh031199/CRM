{% extends 'nextify/base.html' %} {% block main_content %}

<div class="container-fluid">
  <div class="row justify-content-center">
    <div class="col-12">
      <!-- Header -->
      <div class="header">
        <div class="header-body">
          <div class="row align-items-center">
            <div class="col">
              <!-- Pretitle -->
              <h6 class="header-pretitle">Liên hệ</h6>

              <!-- Title -->
              <h1 class="header-title text-truncate">Danh sách</h1>
            </div>

            <div class="col-auto">
              <a href="#!" class="btn btn-white ms-2"> Nhập file </a>
              <!-- Buttons -->
              <a data-bs-toggle="offcanvas" href="#offcanvasAddContact" role="button" aria-controls="offcanvasAddContact" class="btn btn-primary ms-2">Thêm mới </a>
            </div>
          </div>
          <!-- / .row -->
          <div class="row align-items-center">
            <div class="col">
              <!-- Nav -->
              <ul class="nav nav-tabs nav-overflow header-tabs">
                <li class="nav-item">
                  <a href="#!" class="nav-link text-nowrap active">
                    Tất cả
                    <span class="badge rounded-pill bg-secondary-soft"
                      >{{total}}</span
                    >
                  </a>
                </li>
                <!-- <li class="nav-item">
                    <a href="#!" class="nav-link text-nowrap">
                      Your contacts <span class="badge rounded-pill bg-secondary-soft">231</span>
                    </a>
                  </li> -->
                <!-- <li class="nav-item">
                  <a href="#!" class="nav-link text-nowrap">
                    Đã xóa
                    <span class="badge rounded-pill bg-secondary-soft">22</span>
                  </a>
                </li> -->
              </ul>
            </div>
          </div>
        </div>
      </div>

      <!-- Tab content -->
      <div class="tab-content">
        <div
          class="tab-pane fade show active"
          id="contactsListPane"
          role="tabpanel"
          aria-labelledby="contactsListTab"
        >
          <!-- Card -->
          <div
            class="card"
            data-list='{"valueNames": ["item-name", "item-title", "item-email", "item-phone", "item-score", "item-company"], "page": 10, "pagination": {"paginationClass": "list-pagination"}}'
            id="contactsList"
          >
            <div class="card-header">
              <div class="row align-items-center">
                <div class="col">
                  <!-- Form -->
                  <form>
                    <div
                      class="input-group input-group-flush input-group-merge input-group-reverse"
                    >
                      <input
                        class="form-control list-search"
                        type="search"
                        placeholder="Search"
                      />
                      <span class="input-group-text">
                        <i class="fe fe-search"></i>
                      </span>
                    </div>
                  </form>
                </div>

                <div class="col-auto">
                  <!-- Dropdown -->
                  <div class="dropdown">
                    <!-- Toggle -->
                    <button
                      class="btn btn-sm btn-white"
                      type="button"
                      data-bs-toggle="dropdown"
                      data-bs-auto-close="outside"
                      aria-haspopup="true"
                      aria-expanded="false"
                    >
                      <i class="fe fe-sliders me-1"></i> Filter
                      <span class="badge bg-primary ms-1 d-none">0</span>
                    </button>

                    <!-- Menu -->
                    <form
                      class="dropdown-menu dropdown-menu-end dropdown-menu-card"
                      style=""
                    >
                      <div class="card-header">
                        <!-- Title -->
                        <h4 class="card-header-title">Filters</h4>

                        <!-- Link -->
                        <button
                          class="btn btn-sm btn-link text-reset d-none"
                          type="reset"
                        >
                          <small>Clear filters</small>
                        </button>
                      </div>
                      <div class="card-body">
                        <!-- List group -->
                        <div class="list-group list-group-flush mt-n4 mb-4">
                          <div class="list-group-item">
                            <div class="row">
                              <div class="col">
                                <!-- Text -->
                                <small>Title</small>
                              </div>
                              <div class="col-auto">
                                <!-- Select -->
                                <div
                                  class="choices"
                                  data-type="select-one"
                                  tabindex="0"
                                  role="listbox"
                                  aria-haspopup="true"
                                  aria-expanded="false"
                                >
                                  <div class="form-select form-select-sm">
                                    <select
                                      class="form-select form-select-sm form-control"
                                      name="item-title"
                                      data-choices='{"searchEnabled": false}'
                                      hidden=""
                                      tabindex="-1"
                                      data-choice="active"
                                    >
                                      <option
                                        value="*"
                                        data-custom-properties="[object Object]"
                                      >
                                        Any
                                      </option>
                                    </select>
                                    <div
                                      class="choices__list choices__list--single"
                                    >
                                      <div
                                        class="choices__item choices__item--selectable"
                                        data-item=""
                                        data-id="1"
                                        data-value="*"
                                        data-custom-properties="[object Object]"
                                        aria-selected="true"
                                      >
                                        Any
                                      </div>
                                    </div>
                                  </div>
                                  <div
                                    class="choices__list dropdown-menu"
                                    aria-expanded="false"
                                  >
                                    <div class="choices__list" role="listbox">
                                      <div
                                        class="undefined is-highlighted"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="1"
                                        data-value="*"
                                        role="option"
                                        aria-selected="true"
                                      >
                                        Any
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="2"
                                        data-value="Designer"
                                        role="option"
                                      >
                                        Designer
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="3"
                                        data-value="Developer"
                                        role="option"
                                      >
                                        Developer
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="4"
                                        data-value="Owner"
                                        role="option"
                                      >
                                        Owner
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="5"
                                        data-value="Founder"
                                        role="option"
                                      >
                                        Founder
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <!-- / .row -->
                          </div>
                          <div class="list-group-item">
                            <div class="row">
                              <div class="col">
                                <!-- Text -->
                                <small>Lead scrore</small>
                              </div>
                              <div class="col-auto">
                                <!-- Select -->
                                <div
                                  class="choices"
                                  data-type="select-one"
                                  tabindex="0"
                                  role="listbox"
                                  aria-haspopup="true"
                                  aria-expanded="false"
                                >
                                  <div class="form-select form-select-sm">
                                    <select
                                      class="form-select form-select-sm form-control"
                                      name="item-score"
                                      data-choices='{"searchEnabled": false}'
                                      hidden=""
                                      tabindex="-1"
                                      data-choice="active"
                                    >
                                      <option
                                        value="*"
                                        data-custom-properties="[object Object]"
                                      >
                                        Any
                                      </option>
                                    </select>
                                    <div
                                      class="choices__list choices__list--single"
                                    >
                                      <div
                                        class="choices__item choices__item--selectable"
                                        data-item=""
                                        data-id="1"
                                        data-value="*"
                                        data-custom-properties="[object Object]"
                                        aria-selected="true"
                                      >
                                        Any
                                      </div>
                                    </div>
                                  </div>
                                  <div
                                    class="choices__list dropdown-menu"
                                    aria-expanded="false"
                                  >
                                    <div class="choices__list" role="listbox">
                                      <div
                                        class="undefined is-highlighted"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="1"
                                        data-value="*"
                                        role="option"
                                        aria-selected="true"
                                      >
                                        Any
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="2"
                                        data-value="1/10"
                                        role="option"
                                      >
                                        1+
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="3"
                                        data-value="2/10"
                                        role="option"
                                      >
                                        2+
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="4"
                                        data-value="3/10"
                                        role="option"
                                      >
                                        3+
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="5"
                                        data-value="4/10"
                                        role="option"
                                      >
                                        4+
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="6"
                                        data-value="5/10"
                                        role="option"
                                      >
                                        5+
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="7"
                                        data-value="6/10"
                                        role="option"
                                      >
                                        6+
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="8"
                                        data-value="7/10"
                                        role="option"
                                      >
                                        7+
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="9"
                                        data-value="8/10"
                                        role="option"
                                      >
                                        8+
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="10"
                                        data-value="9/10"
                                        role="option"
                                      >
                                        9+
                                      </div>
                                      <div
                                        class="undefined undefined undefined"
                                        data-select-text="Press to select"
                                        data-choice=""
                                        data-choice-selectable=""
                                        data-id="11"
                                        data-value="10/10"
                                        role="option"
                                      >
                                        10
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <!-- / .row -->
                          </div>
                        </div>

                        <!-- Button -->
                        <button class="btn w-100 btn-primary" type="submit">
                          Apply filter
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
              <!-- / .row -->
            </div>
            <div class="table-responsive">
              <table class="table table-sm table-hover table-nowrap card-table">
                <thead>
                  <tr>
                    <th>
                      <!-- Checkbox -->
                      <div class="form-check mb-n2">
                        <input
                          class="form-check-input list-checkbox-all"
                          id="listCheckboxAll"
                          type="checkbox"
                        />
                        <label
                          class="form-check-label"
                          for="listCheckboxAll"
                        ></label>
                      </div>
                    </th>
                    <th>
                      <a
                        class="list-sort text-muted"
                        data-sort="item-name"
                        href="#"
                        >Liên hệ</a
                      >
                    </th>
                    <th>
                      <a
                        class="list-sort text-muted"
                        data-sort="item-name"
                        href="#"
                        >Ngày tạo</a
                      >
                    </th>               
                    <th>
                      <a
                        class="list-sort text-muted"
                        data-sort="item-email"
                        href="#"
                        >Email</a
                      >
                    </th>
                    <th>
                      <a
                        class="list-sort text-muted"
                        data-sort="item-phone"
                        href="#"
                        >Số điện thoại</a
                      >
                    </th>
                 
                  
                  </tr>
                </thead>
                <tbody class="list fs-base">
                  {%for cus in list_cus %} 
                  <tr>
                    <td>
                      <!-- Checkbox -->
                      <div class="form-check">
                        <input
                          class="form-check-input list-checkbox"
                          id="listCheckboxOne"
                          type="checkbox"
                        />
                        <label
                          class="form-check-label"
                          for="listCheckboxOne"
                        ></label>
                      </div>
                    </td>
                    <td>
                      <!-- Avatar -->
                      <div class="avatar avatar-xs align-middle me-2">
                       
                        {% if cus.user.avatar and cus.user.avatar|length > 0 %}
                        <img class="avatar-img rounded-circle"
                            src="{{ cus.user.avatar.replace('http:', 'https:') }}" />
                        {% else %}
                        {% set avatar = cus.user|human_avatar %}
                        <img class="avatar-img rounded-circle" src="{{ avatar }}" />

                        {% endif %}
                      </div>
                      <a class="item-name text-reset" href="/contacts/index/{{cus._id}}"
                        >
                        {% if cus.user.name and cus.user.name|length > 0 and cus.user.name!= 'None' %}
                        {{cus.user.name}}
                        {%else%}
                        {% if cus.user.phone and cus.user.phone|length > 0 and cus.user.phone!= 'None' %}
                        {{cus.user.phone}}
                        {%else%}
                        {{cus.user.email}}
                        {%endif%}
                        {%endif%}
                        </a
                      >
                    </td>
                    <td>
                      <!-- Text -->
                      <span class="item-title"> {{ cus.update_at|human_time }}</span>
                    </td>
                    <td>
                      <!-- Email -->
                      <a
                        class="item-email text-reset"
                        >
                        {% if cus.user.email and cus.user.email|length > 0 and cus.user.email!= 'None' %}
                        {{cus.user.email}}
                        {%endif%}
                        </a
                      >
                    </td>
                    <td>
                      <!-- Phone -->
                      <a class="item-phone text-reset" href="tel:1-123-456-4890"
                        >
                        {% if cus.user.phone and cus.user.phone|length > 0 and cus.user.phone!= 'None' %}
                        {{cus.user.phone}}
                        {%endif%}
                        </a
                      >
                    </td>
                  
                  
                  </tr>
                  {%endfor%}
                 
                </tbody>
              </table>
            </div>
            <div class="card-footer d-flex justify-content-between">
              <!-- Pagination (prev) -->
              <ul
                class="list-pagination-prev pagination pagination-tabs card-pagination"
              >
                <!-- <li class="page-item">
                  <a class="page-link ps-0 pe-4 border-end" href="#">
                    <i class="fe fe-arrow-left me-1"></i> Prev
                  </a>
                </li> -->
              </ul>

              <!-- Pagination -->
              <!-- <ul
                class="list-pagination pagination pagination-tabs card-pagination"
              > -->
              <!-- <ul class="pagination justify-content-center"> -->
              {% if pagination %}
              {{ pagination.links }}
              {% endif %}
              <!-- </ul> -->

              <!-- Pagination (next) -->
              <ul
                class="list-pagination-next pagination pagination-tabs card-pagination"
              >
                <!-- <li class="page-item">
                  <a class="page-link ps-4 pe-0 border-start" href="#">
                    Next <i class="fe fe-arrow-right ms-1"></i>
                  </a>
                </li> -->
              </ul>

         
            </div>
          </div>
        </div>
   
      </div>
    </div>
  </div>
  <!-- / .row -->
</div>
<form class="offcanvas offcanvas-end" id="offcanvasAddContact" tabindex="-1" aria-modal="true" role="dialog">
  <div class="offcanvas-body">

    <!-- Close -->
    <a class="btn-close" href="#" data-bs-dismiss="offcanvas" aria-label="Close"></a>

  
    <!-- Heading -->
    <h2 class="text-center mb-2">
      Thêm mới liên hệ
    </h2>

   

    <!-- Divider -->
    <hr class="mb-4">


    <div class="form-group">
      <label for="exampleInputEmail1" class="form-label">Tên</label>
      <input type="email" class="form-control" id="floatingInput" placeholder="name@example.com">
      
    </div>
    <div class="form-group">
      <label for="exampleInputEmail1" class="form-label">Họ và đệm</label>
      <input type="email" class="form-control" id="floatingInput" placeholder="name@example.com">
 
    </div>
    <div class="form-group">
      <label for="exampleInputEmail1" class="form-label">Email</label>
      <input type="email" class="form-control" id="floatingInput" placeholder="name@example.com">
  
    </div>
    <div class="form-group">
      <label for="exampleInputEmail1" class="form-label">Số điện thoại</label>
      <input type="email" class="form-control" id="floatingInput" placeholder="name@example.com">
     
    </div>

  </div>
  <div class="offcanvas-header">
    <div class="row col-12">
      <div class="col-6">
        <button type="submit" class="btn w-100 btn-outline-secondary mt-auto">
          Bỏ qua
        </button>
      </div>
      <div class="col-6">
        <button type="submit" class="btn w-100 btn-primary mt-auto">
          Xác nhận
        </button>
      </div>
    </div>
    <!-- Button -->
   

  </div>
</form>

{%endblock%}
